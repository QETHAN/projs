/**
 * 合并
 * @authors Stri (stri.vip@gmail.com)
 * @date    2013-06-14 15:52:27
 * @version $Id$
 */
(function (module) {
  var easyTemplate = require('./easyTemplate'),
    fs = require('fs'),
    includeReg = /\$\<\!\#include\s*\(\s*(['|"])([\w\-\.\/]*)\1\s*\)\s*>;?/gi;

  function combine(filePath,Opts){
    var html = '';
    html = easyTemplate(fs.readFileSync(filePath,'utf-8'),Opts.source).toString();

    // 递归替换<#include("../xx")#>
    return html.replace(includeReg,function(){
      var key = arguments[2]
      console.log(key);
    });
    
  }
})(module);